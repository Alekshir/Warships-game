/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={8641:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},5017:(e,t,s)=>{var i=s(2786);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},6677:(e,t,s)=>{var i=s(2280),n=s(1569),r=s(6385),o=i("unscopables"),a=Array.prototype;null==a[o]&&r.f(a,o,{configurable:!0,value:n(null)}),e.exports=function(e){a[o][e]=!0}},3350:(e,t,s)=>{"use strict";var i=s(1140).charAt;e.exports=function(e,t,s){return t+(s?i(e,t).length:1)}},9519:e=>{e.exports=function(e,t,s){if(!(e instanceof t))throw TypeError("Incorrect "+(s?s+" ":"")+"invocation");return e}},3875:(e,t,s)=>{var i=s(2786);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},7190:(e,t,s)=>{var i=s(9580),n=s(5108),r=s(2565),o=function(e){return function(t,s,o){var a,l=i(t),c=n(l.length),h=r(o,c);if(e&&s!=s){for(;c>h;)if((a=l[h++])!=a)return!0}else for(;c>h;h++)if((e||h in l)&&l[h]===s)return e||h||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},4324:(e,t,s)=>{"use strict";var i=s(9044);e.exports=function(e,t){var s=[][e];return!!s&&i((function(){s.call(null,t||function(){throw 1},1)}))}},9637:(e,t,s)=>{var i=s(3875);e.exports=function(e,t,s,n){try{return n?t(i(s)[0],s[1]):t(s)}catch(t){var r=e.return;throw void 0!==r&&i(r.call(e)),t}}},8662:(e,t,s)=>{var i=s(2280)("iterator"),n=!1;try{var r=0,o={next:function(){return{done:!!r++}},return:function(){n=!0}};o[i]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var s=!1;try{var r={};r[i]=function(){return{next:function(){return{done:s=!0}}}},e(r)}catch(e){}return s}},9159:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},6994:(e,t,s)=>{var i=s(7301),n=s(9159),r=s(2280)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=i?n:function(e){var t,s,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(s=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?s:o?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},3870:(e,t,s)=>{var i=s(454),n=s(1561),r=s(6012),o=s(6385);e.exports=function(e,t){for(var s=n(t),a=o.f,l=r.f,c=0;c<s.length;c++){var h=s[c];i(e,h)||a(e,h,l(t,h))}}},5115:(e,t,s)=>{var i=s(9044);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6181:(e,t,s)=>{"use strict";var i=s(7022).IteratorPrototype,n=s(1569),r=s(9199),o=s(878),a=s(4818),l=function(){return this};e.exports=function(e,t,s){var c=t+" Iterator";return e.prototype=n(i,{next:r(1,s)}),o(e,c,!1,!0),a[c]=l,e}},5899:(e,t,s)=>{var i=s(7493),n=s(6385),r=s(9199);e.exports=i?function(e,t,s){return n.f(e,t,r(1,s))}:function(e,t,s){return e[t]=s,e}},9199:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},1495:(e,t,s)=>{"use strict";var i=s(9882),n=s(6181),r=s(2654),o=s(2412),a=s(878),l=s(5899),c=s(5974),h=s(2280),u=s(1178),m=s(4818),d=s(7022),p=d.IteratorPrototype,g=d.BUGGY_SAFARI_ITERATORS,f=h("iterator"),v="keys",y="values",S="entries",E=function(){return this};e.exports=function(e,t,s,h,d,w,b){n(s,t,h);var M,T,x,C=function(e){if(e===d&&B)return B;if(!g&&e in k)return k[e];switch(e){case v:case y:case S:return function(){return new s(this,e)}}return function(){return new s(this)}},_=t+" Iterator",L=!1,k=e.prototype,I=k[f]||k["@@iterator"]||d&&k[d],B=!g&&I||C(d),O="Array"==t&&k.entries||I;if(O&&(M=r(O.call(new e)),p!==Object.prototype&&M.next&&(u||r(M)===p||(o?o(M,p):"function"!=typeof M[f]&&l(M,f,E)),a(M,_,!0,!0),u&&(m[_]=E))),d==y&&I&&I.name!==y&&(L=!0,B=function(){return I.call(this)}),u&&!b||k[f]===B||l(k,f,B),m[t]=B,d)if(T={values:C(y),keys:w?B:C(v),entries:C(S)},b)for(x in T)(g||L||!(x in k))&&c(k,x,T[x]);else i({target:t,proto:!0,forced:g||L},T);return T}},7493:(e,t,s)=>{var i=s(9044);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2750:(e,t,s)=>{var i=s(8363),n=s(2786),r=i.document,o=n(r)&&n(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},2848:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3121:(e,t,s)=>{var i=s(2647);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},2647:(e,t,s)=>{var i=s(2773);e.exports=i("navigator","userAgent")||""},1197:(e,t,s)=>{var i,n,r=s(8363),o=s(2647),a=r.process,l=a&&a.versions,c=l&&l.v8;c?n=(i=c.split("."))[0]+i[1]:o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(n=i[1]),e.exports=n&&+n},8869:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},9882:(e,t,s)=>{var i=s(8363),n=s(6012).f,r=s(5899),o=s(5974),a=s(1621),l=s(3870),c=s(6291);e.exports=function(e,t){var s,h,u,m,d,p=e.target,g=e.global,f=e.stat;if(s=g?i:f?i[p]||a(p,{}):(i[p]||{}).prototype)for(h in t){if(m=t[h],u=e.noTargetGet?(d=n(s,h))&&d.value:s[h],!c(g?h:p+(f?".":"#")+h,e.forced)&&void 0!==u){if(typeof m==typeof u)continue;l(m,u)}(e.sham||u&&u.sham)&&r(m,"sham",!0),o(s,h,m,e)}}},9044:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},1492:(e,t,s)=>{"use strict";s(9275);var i=s(5974),n=s(9044),r=s(2280),o=s(9749),a=s(5899),l=r("species"),c=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),h="$0"==="a".replace(/./,"$0"),u=r("replace"),m=!!/./[u]&&""===/./[u]("a","$0"),d=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var s="ab".split(e);return 2!==s.length||"a"!==s[0]||"b"!==s[1]}));e.exports=function(e,t,s,u){var p=r(e),g=!n((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=g&&!n((function(){var t=!1,s=/a/;return"split"===e&&((s={}).constructor={},s.constructor[l]=function(){return s},s.flags="",s[p]=/./[p]),s.exec=function(){return t=!0,null},s[p](""),!t}));if(!g||!f||"replace"===e&&(!c||!h||m)||"split"===e&&!d){var v=/./[p],y=s(p,""[e],(function(e,t,s,i,n){return t.exec===o?g&&!n?{done:!0,value:v.call(t,s,i)}:{done:!0,value:e.call(s,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),S=y[0],E=y[1];i(String.prototype,e,S),i(RegExp.prototype,p,2==t?function(e,t){return E.call(e,this,t)}:function(e){return E.call(e,this)})}u&&a(RegExp.prototype[p],"sham",!0)}},8166:(e,t,s)=>{var i=s(8641);e.exports=function(e,t,s){if(i(e),void 0===t)return e;switch(s){case 0:return function(){return e.call(t)};case 1:return function(s){return e.call(t,s)};case 2:return function(s,i){return e.call(t,s,i)};case 3:return function(s,i,n){return e.call(t,s,i,n)}}return function(){return e.apply(t,arguments)}}},2773:(e,t,s)=>{var i=s(7290),n=s(8363),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(i[e])||r(n[e]):i[e]&&i[e][t]||n[e]&&n[e][t]}},7193:(e,t,s)=>{var i=s(6994),n=s(4818),r=s(2280)("iterator");e.exports=function(e){if(null!=e)return e[r]||e["@@iterator"]||n[i(e)]}},8363:(e,t,s)=>{var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof s.g&&s.g)||Function("return this")()},454:e=>{var t={}.hasOwnProperty;e.exports=function(e,s){return t.call(e,s)}},7505:e=>{e.exports={}},6271:(e,t,s)=>{var i=s(8363);e.exports=function(e,t){var s=i.console;s&&s.error&&(1===arguments.length?s.error(e):s.error(e,t))}},7055:(e,t,s)=>{var i=s(2773);e.exports=i("document","documentElement")},7548:(e,t,s)=>{var i=s(7493),n=s(9044),r=s(2750);e.exports=!i&&!n((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},8609:(e,t,s)=>{var i=s(9044),n=s(9159),r="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==n(e)?r.call(e,""):Object(e)}:Object},6429:(e,t,s)=>{var i=s(9415),n=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return n.call(e)}),e.exports=i.inspectSource},821:(e,t,s)=>{var i,n,r,o=s(6830),a=s(8363),l=s(2786),c=s(5899),h=s(454),u=s(466),m=s(7505),d=a.WeakMap;if(o){var p=new d,g=p.get,f=p.has,v=p.set;i=function(e,t){return v.call(p,e,t),t},n=function(e){return g.call(p,e)||{}},r=function(e){return f.call(p,e)}}else{var y=u("state");m[y]=!0,i=function(e,t){return c(e,y,t),t},n=function(e){return h(e,y)?e[y]:{}},r=function(e){return h(e,y)}}e.exports={set:i,get:n,has:r,enforce:function(e){return r(e)?n(e):i(e,{})},getterFor:function(e){return function(t){var s;if(!l(t)||(s=n(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return s}}}},8089:(e,t,s)=>{var i=s(2280),n=s(4818),r=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[r]===e)}},6291:(e,t,s)=>{var i=s(9044),n=/#|\.prototype\./,r=function(e,t){var s=a[o(e)];return s==c||s!=l&&("function"==typeof t?i(t):!!t)},o=r.normalize=function(e){return String(e).replace(n,".").toLowerCase()},a=r.data={},l=r.NATIVE="N",c=r.POLYFILL="P";e.exports=r},2786:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1178:e=>{e.exports=!1},2622:(e,t,s)=>{var i=s(2786),n=s(9159),r=s(2280)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==n(e))}},5166:(e,t,s)=>{var i=s(3875),n=s(8089),r=s(5108),o=s(8166),a=s(7193),l=s(9637),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,s,h,u){var m,d,p,g,f,v,y,S=o(t,s,h?2:1);if(u)m=e;else{if("function"!=typeof(d=a(e)))throw TypeError("Target is not iterable");if(n(d)){for(p=0,g=r(e.length);g>p;p++)if((f=h?S(i(y=e[p])[0],y[1]):S(e[p]))&&f instanceof c)return f;return new c(!1)}m=d.call(e)}for(v=m.next;!(y=v.call(m)).done;)if("object"==typeof(f=l(m,S,y.value,h))&&f&&f instanceof c)return f;return new c(!1)}).stop=function(e){return new c(!0,e)}},7022:(e,t,s)=>{"use strict";var i,n,r,o=s(2654),a=s(5899),l=s(454),c=s(2280),h=s(1178),u=c("iterator"),m=!1;[].keys&&("next"in(r=[].keys())?(n=o(o(r)))!==Object.prototype&&(i=n):m=!0),null==i&&(i={}),h||l(i,u)||a(i,u,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},4818:e=>{e.exports={}},1800:(e,t,s)=>{var i,n,r,o,a,l,c,h,u=s(8363),m=s(6012).f,d=s(9159),p=s(4643).set,g=s(3121),f=u.MutationObserver||u.WebKitMutationObserver,v=u.process,y=u.Promise,S="process"==d(v),E=m(u,"queueMicrotask"),w=E&&E.value;w||(i=function(){var e,t;for(S&&(e=v.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?o():r=void 0,e}}r=void 0,e&&e.enter()},S?o=function(){v.nextTick(i)}:f&&!g?(a=!0,l=document.createTextNode(""),new f(i).observe(l,{characterData:!0}),o=function(){l.data=a=!a}):y&&y.resolve?(c=y.resolve(void 0),h=c.then,o=function(){h.call(c,i)}):o=function(){p.call(u,i)}),e.exports=w||function(e){var t={fn:e,next:void 0};r&&(r.next=t),n||(n=t,o()),r=t}},8369:(e,t,s)=>{var i=s(8363);e.exports=i.Promise},3850:(e,t,s)=>{var i=s(9044);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},6830:(e,t,s)=>{var i=s(8363),n=s(6429),r=i.WeakMap;e.exports="function"==typeof r&&/native code/.test(n(r))},9269:(e,t,s)=>{"use strict";var i=s(8641),n=function(e){var t,s;this.promise=new e((function(e,i){if(void 0!==t||void 0!==s)throw TypeError("Bad Promise constructor");t=e,s=i})),this.resolve=i(t),this.reject=i(s)};e.exports.f=function(e){return new n(e)}},1569:(e,t,s)=>{var i,n=s(3875),r=s(7840),o=s(8869),a=s(7505),l=s(7055),c=s(2750),h=s(466)("IE_PROTO"),u=function(){},m=function(e){return"<script>"+e+"<\/script>"},d=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;d=i?function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F);for(var s=o.length;s--;)delete d.prototype[o[s]];return d()};a[h]=!0,e.exports=Object.create||function(e,t){var s;return null!==e?(u.prototype=n(e),s=new u,u.prototype=null,s[h]=e):s=d(),void 0===t?s:r(s,t)}},7840:(e,t,s)=>{var i=s(7493),n=s(6385),r=s(3875),o=s(667);e.exports=i?Object.defineProperties:function(e,t){r(e);for(var s,i=o(t),a=i.length,l=0;a>l;)n.f(e,s=i[l++],t[s]);return e}},6385:(e,t,s)=>{var i=s(7493),n=s(7548),r=s(3875),o=s(1893),a=Object.defineProperty;t.f=i?a:function(e,t,s){if(r(e),t=o(t,!0),r(s),n)try{return a(e,t,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported");return"value"in s&&(e[t]=s.value),e}},6012:(e,t,s)=>{var i=s(7493),n=s(1513),r=s(9199),o=s(9580),a=s(1893),l=s(454),c=s(7548),h=Object.getOwnPropertyDescriptor;t.f=i?h:function(e,t){if(e=o(e),t=a(t,!0),c)try{return h(e,t)}catch(e){}if(l(e,t))return r(!n.f.call(e,t),e[t])}},7994:(e,t,s)=>{var i=s(8794),n=s(8869).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},9612:(e,t)=>{t.f=Object.getOwnPropertySymbols},2654:(e,t,s)=>{var i=s(454),n=s(744),r=s(466),o=s(5115),a=r("IE_PROTO"),l=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=n(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},8794:(e,t,s)=>{var i=s(454),n=s(9580),r=s(7190).indexOf,o=s(7505);e.exports=function(e,t){var s,a=n(e),l=0,c=[];for(s in a)!i(o,s)&&i(a,s)&&c.push(s);for(;t.length>l;)i(a,s=t[l++])&&(~r(c,s)||c.push(s));return c}},667:(e,t,s)=>{var i=s(8794),n=s(8869);e.exports=Object.keys||function(e){return i(e,n)}},1513:(e,t)=>{"use strict";var s={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!s.call({1:2},1);t.f=n?function(e){var t=i(this,e);return!!t&&t.enumerable}:s},2412:(e,t,s)=>{var i=s(3875),n=s(5017);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,s={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(s,[]),t=s instanceof Array}catch(e){}return function(s,r){return i(s),n(r),t?e.call(s,r):s.__proto__=r,s}}():void 0)},1561:(e,t,s)=>{var i=s(2773),n=s(7994),r=s(9612),o=s(3875);e.exports=i("Reflect","ownKeys")||function(e){var t=n.f(o(e)),s=r.f;return s?t.concat(s(e)):t}},7290:(e,t,s)=>{var i=s(8363);e.exports=i},4443:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},1605:(e,t,s)=>{var i=s(3875),n=s(2786),r=s(9269);e.exports=function(e,t){if(i(e),n(t)&&t.constructor===e)return t;var s=r.f(e);return(0,s.resolve)(t),s.promise}},7592:(e,t,s)=>{var i=s(5974);e.exports=function(e,t,s){for(var n in t)i(e,n,t[n],s);return e}},5974:(e,t,s)=>{var i=s(8363),n=s(5899),r=s(454),o=s(1621),a=s(6429),l=s(821),c=l.get,h=l.enforce,u=String(String).split("String");(e.exports=function(e,t,s,a){var l=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,m=!!a&&!!a.noTargetGet;"function"==typeof s&&("string"!=typeof t||r(s,"name")||n(s,"name",t),h(s).source=u.join("string"==typeof t?t:"")),e!==i?(l?!m&&e[t]&&(c=!0):delete e[t],c?e[t]=s:n(e,t,s)):c?e[t]=s:o(t,s)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},4088:(e,t,s)=>{var i=s(9159),n=s(9749);e.exports=function(e,t){var s=e.exec;if("function"==typeof s){var r=s.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},9749:(e,t,s)=>{"use strict";var i,n,r=s(8083),o=s(7047),a=RegExp.prototype.exec,l=String.prototype.replace,c=a,h=(i=/a/,n=/b*/g,a.call(i,"a"),a.call(n,"a"),0!==i.lastIndex||0!==n.lastIndex),u=o.UNSUPPORTED_Y||o.BROKEN_CARET,m=void 0!==/()??/.exec("")[1];(h||m||u)&&(c=function(e){var t,s,i,n,o=this,c=u&&o.sticky,d=r.call(o),p=o.source,g=0,f=e;return c&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),f=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(p="(?: "+p+")",f=" "+f,g++),s=new RegExp("^(?:"+p+")",d)),m&&(s=new RegExp("^"+p+"$(?!\\s)",d)),h&&(t=o.lastIndex),i=a.call(c?s:o,f),c?i?(i.input=i.input.slice(g),i[0]=i[0].slice(g),i.index=o.lastIndex,o.lastIndex+=i[0].length):o.lastIndex=0:h&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),m&&i&&i.length>1&&l.call(i[0],s,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(i[n]=void 0)})),i}),e.exports=c},8083:(e,t,s)=>{"use strict";var i=s(3875);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},7047:(e,t,s)=>{"use strict";var i=s(9044);function n(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},6411:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},1621:(e,t,s)=>{var i=s(8363),n=s(5899);e.exports=function(e,t){try{n(i,e,t)}catch(s){i[e]=t}return t}},7323:(e,t,s)=>{"use strict";var i=s(2773),n=s(6385),r=s(2280),o=s(7493),a=r("species");e.exports=function(e){var t=i(e),s=n.f;o&&t&&!t[a]&&s(t,a,{configurable:!0,get:function(){return this}})}},878:(e,t,s)=>{var i=s(6385).f,n=s(454),r=s(2280)("toStringTag");e.exports=function(e,t,s){e&&!n(e=s?e:e.prototype,r)&&i(e,r,{configurable:!0,value:t})}},466:(e,t,s)=>{var i=s(3580),n=s(4524),r=i("keys");e.exports=function(e){return r[e]||(r[e]=n(e))}},9415:(e,t,s)=>{var i=s(8363),n=s(1621),r="__core-js_shared__",o=i[r]||n(r,{});e.exports=o},3580:(e,t,s)=>{var i=s(1178),n=s(9415);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},7270:(e,t,s)=>{var i=s(3875),n=s(8641),r=s(2280)("species");e.exports=function(e,t){var s,o=i(e).constructor;return void 0===o||null==(s=i(o)[r])?t:n(s)}},1140:(e,t,s)=>{var i=s(8330),n=s(6411),r=function(e){return function(t,s){var r,o,a=String(n(t)),l=i(s),c=a.length;return l<0||l>=c?e?"":void 0:(r=a.charCodeAt(l))<55296||r>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?e?a.charAt(l):r:e?a.slice(l,l+2):o-56320+(r-55296<<10)+65536}};e.exports={codeAt:r(!1),charAt:r(!0)}},8487:(e,t,s)=>{var i=s(9044),n=s(2569);e.exports=function(e){return i((function(){return!!n[e]()||"​᠎"!="​᠎"[e]()||n[e].name!==e}))}},287:(e,t,s)=>{var i=s(6411),n="["+s(2569)+"]",r=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),a=function(e){return function(t){var s=String(i(t));return 1&e&&(s=s.replace(r,"")),2&e&&(s=s.replace(o,"")),s}};e.exports={start:a(1),end:a(2),trim:a(3)}},4643:(e,t,s)=>{var i,n,r,o=s(8363),a=s(9044),l=s(9159),c=s(8166),h=s(7055),u=s(2750),m=s(3121),d=o.location,p=o.setImmediate,g=o.clearImmediate,f=o.process,v=o.MessageChannel,y=o.Dispatch,S=0,E={},w=function(e){if(E.hasOwnProperty(e)){var t=E[e];delete E[e],t()}},b=function(e){return function(){w(e)}},M=function(e){w(e.data)},T=function(e){o.postMessage(e+"",d.protocol+"//"+d.host)};p&&g||(p=function(e){for(var t=[],s=1;arguments.length>s;)t.push(arguments[s++]);return E[++S]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(S),S},g=function(e){delete E[e]},"process"==l(f)?i=function(e){f.nextTick(b(e))}:y&&y.now?i=function(e){y.now(b(e))}:v&&!m?(r=(n=new v).port2,n.port1.onmessage=M,i=c(r.postMessage,r,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||a(T)||"file:"===d.protocol?i="onreadystatechange"in u("script")?function(e){h.appendChild(u("script")).onreadystatechange=function(){h.removeChild(this),w(e)}}:function(e){setTimeout(b(e),0)}:(i=T,o.addEventListener("message",M,!1))),e.exports={set:p,clear:g}},2565:(e,t,s)=>{var i=s(8330),n=Math.max,r=Math.min;e.exports=function(e,t){var s=i(e);return s<0?n(s+t,0):r(s,t)}},9580:(e,t,s)=>{var i=s(8609),n=s(6411);e.exports=function(e){return i(n(e))}},8330:e=>{var t=Math.ceil,s=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?s:t)(e)}},5108:(e,t,s)=>{var i=s(8330),n=Math.min;e.exports=function(e){return e>0?n(i(e),9007199254740991):0}},744:(e,t,s)=>{var i=s(6411);e.exports=function(e){return Object(i(e))}},1893:(e,t,s)=>{var i=s(2786);e.exports=function(e,t){if(!i(e))return e;var s,n;if(t&&"function"==typeof(s=e.toString)&&!i(n=s.call(e)))return n;if("function"==typeof(s=e.valueOf)&&!i(n=s.call(e)))return n;if(!t&&"function"==typeof(s=e.toString)&&!i(n=s.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},7301:(e,t,s)=>{var i={};i[s(2280)("toStringTag")]="z",e.exports="[object z]"===String(i)},4524:e=>{var t=0,s=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+s).toString(36)}},189:(e,t,s)=>{var i=s(3850);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2280:(e,t,s)=>{var i=s(8363),n=s(3580),r=s(454),o=s(4524),a=s(3850),l=s(189),c=n("wks"),h=i.Symbol,u=l?h:h&&h.withoutSetter||o;e.exports=function(e){return r(c,e)||(a&&r(h,e)?c[e]=h[e]:c[e]=u("Symbol."+e)),c[e]}},2569:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},4883:(e,t,s)=>{"use strict";var i=s(9580),n=s(6677),r=s(4818),o=s(821),a=s(1495),l="Array Iterator",c=o.set,h=o.getterFor(l);e.exports=a(Array,"Array",(function(e,t){c(this,{type:l,target:i(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,s=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==s?{value:i,done:!1}:"values"==s?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},5281:(e,t,s)=>{"use strict";var i=s(9882),n=s(8641),r=s(744),o=s(9044),a=s(4324),l=[],c=l.sort,h=o((function(){l.sort(void 0)})),u=o((function(){l.sort(null)})),m=a("sort");i({target:"Array",proto:!0,forced:h||!u||!m},{sort:function(e){return void 0===e?c.call(r(this)):c.call(r(this),n(e))}})},5054:(e,t,s)=>{"use strict";var i,n,r,o,a=s(9882),l=s(1178),c=s(8363),h=s(2773),u=s(8369),m=s(5974),d=s(7592),p=s(878),g=s(7323),f=s(2786),v=s(8641),y=s(9519),S=s(9159),E=s(6429),w=s(5166),b=s(8662),M=s(7270),T=s(4643).set,x=s(1800),C=s(1605),_=s(6271),L=s(9269),k=s(4443),I=s(821),B=s(6291),O=s(2280),P=s(1197),H=O("species"),R="Promise",N=I.get,j=I.set,F=I.getterFor(R),D=u,A=c.TypeError,G=c.document,V=c.process,z=h("fetch"),W=L.f,Y=W,U="process"==S(V),J=!!(G&&G.createEvent&&c.dispatchEvent),X="unhandledrejection",$=B(R,(function(){if(E(D)===String(D)){if(66===P)return!0;if(!U&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!D.prototype.finally)return!0;if(P>=51&&/native code/.test(D))return!1;var e=D.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[H]=t,!(e.then((function(){}))instanceof t)})),K=$||!b((function(e){D.all(e).catch((function(){}))})),q=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t,s){if(!t.notified){t.notified=!0;var i=t.reactions;x((function(){for(var n=t.value,r=1==t.state,o=0;i.length>o;){var a,l,c,h=i[o++],u=r?h.ok:h.fail,m=h.resolve,d=h.reject,p=h.domain;try{u?(r||(2===t.rejection&&se(e,t),t.rejection=1),!0===u?a=n:(p&&p.enter(),a=u(n),p&&(p.exit(),c=!0)),a===h.promise?d(A("Promise-chain cycle")):(l=q(a))?l.call(a,m,d):m(a)):d(n)}catch(e){p&&!c&&p.exit(),d(e)}}t.reactions=[],t.notified=!1,s&&!t.rejection&&ee(e,t)}))}},Q=function(e,t,s){var i,n;J?((i=G.createEvent("Event")).promise=t,i.reason=s,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:t,reason:s},(n=c["on"+e])?n(i):e===X&&_("Unhandled promise rejection",s)},ee=function(e,t){T.call(c,(function(){var s,i=t.value;if(te(t)&&(s=k((function(){U?V.emit("unhandledRejection",i,e):Q(X,e,i)})),t.rejection=U||te(t)?2:1,s.error))throw s.value}))},te=function(e){return 1!==e.rejection&&!e.parent},se=function(e,t){T.call(c,(function(){U?V.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},ie=function(e,t,s,i){return function(n){e(t,s,n,i)}},ne=function(e,t,s,i){t.done||(t.done=!0,i&&(t=i),t.value=s,t.state=2,Z(e,t,!0))},re=function(e,t,s,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===s)throw A("Promise can't be resolved itself");var n=q(s);n?x((function(){var i={done:!1};try{n.call(s,ie(re,e,i,t),ie(ne,e,i,t))}catch(s){ne(e,i,s,t)}})):(t.value=s,t.state=1,Z(e,t,!1))}catch(s){ne(e,{done:!1},s,t)}}};$&&(D=function(e){y(this,D,R),v(e),i.call(this);var t=N(this);try{e(ie(re,this,t),ie(ne,this,t))}catch(e){ne(this,t,e)}},(i=function(e){j(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(D.prototype,{then:function(e,t){var s=F(this),i=W(M(this,D));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=U?V.domain:void 0,s.parent=!0,s.reactions.push(i),0!=s.state&&Z(this,s,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new i,t=N(e);this.promise=e,this.resolve=ie(re,e,t),this.reject=ie(ne,e,t)},L.f=W=function(e){return e===D||e===r?new n(e):Y(e)},l||"function"!=typeof u||(o=u.prototype.then,m(u.prototype,"then",(function(e,t){var s=this;return new D((function(e,t){o.call(s,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(D,z.apply(c,arguments))}}))),a({global:!0,wrap:!0,forced:$},{Promise:D}),p(D,R,!1,!0),g(R),r=h(R),a({target:R,stat:!0,forced:$},{reject:function(e){var t=W(this);return t.reject.call(void 0,e),t.promise}}),a({target:R,stat:!0,forced:l||$},{resolve:function(e){return C(l&&this===r?D:this,e)}}),a({target:R,stat:!0,forced:K},{all:function(e){var t=this,s=W(t),i=s.resolve,n=s.reject,r=k((function(){var s=v(t.resolve),r=[],o=0,a=1;w(e,(function(e){var l=o++,c=!1;r.push(void 0),a++,s.call(t,e).then((function(e){c||(c=!0,r[l]=e,--a||i(r))}),n)})),--a||i(r)}));return r.error&&n(r.value),s.promise},race:function(e){var t=this,s=W(t),i=s.reject,n=k((function(){var n=v(t.resolve);w(e,(function(e){n.call(t,e).then(s.resolve,i)}))}));return n.error&&i(n.value),s.promise}})},9275:(e,t,s)=>{"use strict";var i=s(9882),n=s(9749);i({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},3290:(e,t,s)=>{"use strict";var i=s(5974),n=s(3875),r=s(9044),o=s(8083),a="toString",l=RegExp.prototype,c=l.toString,h=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=a;(h||u)&&i(RegExp.prototype,a,(function(){var e=n(this),t=String(e.source),s=e.flags;return"/"+t+"/"+String(void 0===s&&e instanceof RegExp&&!("flags"in l)?o.call(e):s)}),{unsafe:!0})},7838:(e,t,s)=>{"use strict";var i=s(1492),n=s(2622),r=s(3875),o=s(6411),a=s(7270),l=s(3350),c=s(5108),h=s(4088),u=s(9749),m=s(9044),d=[].push,p=Math.min,g=4294967295,f=!m((function(){return!RegExp(g,"y")}));i("split",2,(function(e,t,s){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,s){var i=String(o(this)),r=void 0===s?g:s>>>0;if(0===r)return[];if(void 0===e)return[i];if(!n(e))return t.call(i,e,r);for(var a,l,c,h=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,f=new RegExp(e.source,m+"g");(a=u.call(f,i))&&!((l=f.lastIndex)>p&&(h.push(i.slice(p,a.index)),a.length>1&&a.index<i.length&&d.apply(h,a.slice(1)),c=a[0].length,p=l,h.length>=r));)f.lastIndex===a.index&&f.lastIndex++;return p===i.length?!c&&f.test("")||h.push(""):h.push(i.slice(p)),h.length>r?h.slice(0,r):h}:"0".split(void 0,0).length?function(e,s){return void 0===e&&0===s?[]:t.call(this,e,s)}:t,[function(t,s){var n=o(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n,s):i.call(String(n),t,s)},function(e,n){var o=s(i,e,this,n,i!==t);if(o.done)return o.value;var u=r(e),m=String(this),d=a(u,RegExp),v=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),S=new d(f?u:"^(?:"+u.source+")",y),E=void 0===n?g:n>>>0;if(0===E)return[];if(0===m.length)return null===h(S,m)?[m]:[];for(var w=0,b=0,M=[];b<m.length;){S.lastIndex=f?b:0;var T,x=h(S,f?m:m.slice(b));if(null===x||(T=p(c(S.lastIndex+(f?0:b)),m.length))===w)b=l(m,b,v);else{if(M.push(m.slice(w,b)),M.length===E)return M;for(var C=1;C<=x.length-1;C++)if(M.push(x[C]),M.length===E)return M;b=w=T}}return M.push(m.slice(w)),M}]}),!f)},9897:(e,t,s)=>{"use strict";var i=s(9882),n=s(287).trim;i({target:"String",proto:!0,forced:s(8487)("trim")},{trim:function(){return n(this)}})},8995:(e,t,s)=>{var i=s(8363),n=s(2848),r=s(4883),o=s(5899),a=s(2280),l=a("iterator"),c=a("toStringTag"),h=r.values;for(var u in n){var m=i[u],d=m&&m.prototype;if(d){if(d[l]!==h)try{o(d,l,h)}catch(e){d[l]=h}if(d[c]||o(d,c,u),n[u])for(var p in r)if(d[p]!==r[p])try{o(d,p,r[p])}catch(e){d[p]=r[p]}}}}},t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";s(5054),s(5281),s(3290);const e=new class{createHtmlElement(e,t){let s=document.createElement(t);return e.forEach((e=>s.classList.add(e))),s}createCellHtmlElement(e,t){let s=this.createHtmlElement(e,"div");if(t){let e=this.createHtmlElement(t,"div");s.appendChild(e)}return s}createTimeOutPromise(e){return new Promise(((t,s)=>{setTimeout((()=>t(!0)),e)}))}toggleClassOfHtmlElem(e,t,s){return e.classList.toggle(t),e.classList.toggle(s),e}animateSvgLetters(e){return new Promise(((t,s)=>{e.style.display="block";let i=e.getElementsByTagName("path"),n=i.length-1;Array.prototype.forEach.call(i,((e,s)=>{let i=e.getTotalLength();e.style.strokeDasharray=i+" "+i,e.style.strokeDashoffset=String(i),e.getBoundingClientRect();let r=0===s?"":"".concat(s,"s");e.style.transition="stroke-dashoffset 1s ".concat(r," ease-in-out"),e.ontransitionend=()=>{e.style.fill="red",s===n&&t(!0)}})),setTimeout((()=>{Array.prototype.forEach.call(i,(e=>{e.style.strokeDashoffset="0"}),1e3)}))}))}getCoordForMakeShipsDraggableMouseDownOrTouchStartHandler(e,t,s,i){let n=s.getBoundingClientRect(),r=n.bottom-n.top,o=n.right-n.left,a=i?o-r*Math.tan(Math.PI/180*40):o,l=t.getElement().getBoundingClientRect();return{boardCoord:n,boardHeight:r,boardWidthReal:a,deltaY:e.clientY-l.top,deltaX:i?e.clientX-l.left-(e.clientY-l.top)*Math.tan(Math.PI/180*40):e.clientX-l.left}}setShipCoordForMakeShipsDraggableMouseMoveOrTouchMoveHandler(e,t,s,i,n,r){let o=r?t.left+(e.clientY-t.top)*Math.tan(Math.PI/180*40):t.left;s.getElement().style.left=e.clientX-i-o+"px",s.getElement().style.top=e.clientY-n-t.top+"px"}updateShipPositionForMakeShipsDraggableMouseUpOrTouchEndHandler(e,t,s,i,n){let r=e.getElement().getBoundingClientRect(),o=n?t.left+(r.top-t.top)*Math.tan(Math.PI/180*40):t.left,a=Math.round((r.left-o)/s*10),l=Math.round((r.top-t.top)/i*10);e.shipVertical()?(l+e.getSize()>9&&(l=10-e.getSize()),l<0&&(l=0),a>9&&(a=9),a<0&&(a=0)):(a+e.getSize()>9&&(a=10-e.getSize()),a<0&&(a=0),l>9&&(l=9),l<0&&(l=0)),e.updatePosition(l,a,e.shipVertical())}getCurrentDate(){const e=(new Date).getFullYear(),t=(new Date).getMonth()+1,s=(new Date).getDate();return"".concat(e,"-").concat(t,"-").concat(s)}promiseWrapperForTimeOut(e,t){return new Promise(((s,i)=>{const n=setTimeout((()=>i("time out rejection")),t);e.then((e=>{clearInterval(n),s(e)})).catch((e=>{clearInterval(n),i(e)}))}))}isMobileMode(){const e=document.getElementById("boards");return"none"===window.getComputedStyle(e).transform}};function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const i=class{constructor(s,i){t(this,"column",0),t(this,"row",0),t(this,"isVertical",!0),t(this,"hits",0),t(this,"element",void 0),t(this,"size",void 0),this.element=e.createHtmlElement(i,"div"),this.size=s}updatePosition(e,t,s){this.row=e,this.column=t,this.isVertical=s,this.updateLayout()}updateLayout(){const e="9.9%",t=9.9*this.size+"%";this.element.style.left=10*this.column+"%",this.element.style.top=10*this.row+"%",this.isVertical?(this.element.style.width=e,this.element.style.height=t,this.element.classList.contains("ship_horizontal")&&this.element.classList.remove("ship_horizontal"),this.element.classList.add("ship_vertical")):(this.element.style.width=t,this.element.style.height=e,this.element.classList.contains("ship_vertical")&&this.element.classList.remove("ship_vertical"),this.element.classList.add("ship_horizontal"))}flipShip(){this.isVertical=!this.isVertical,this.isVertical?this.row+this.size>10&&(this.row=this.row-this.size+1,this.column=this.column+this.size-1):this.column+this.size>10&&(this.column=this.column-this.size+1,this.row=this.row+this.size-1),this.updateLayout()}getCellsCovered(){let e=[],t=this.row,s=this.column;for(var i=0;i<this.size;i++)e.push(t.toString()+","+s.toString()),this.isVertical?t++:s++;return e}isSunk(){return this.hits===this.size}shipVertical(){return this.isVertical}getSize(){return this.size}getElement(){return this.element}getHits(){return this.hits}setHits(e){this.hits+=e}getShipPositionForReplay(){return{row:this.row,column:this.column,size:this.size,isVertical:this.isVertical,hits:this.hits}}};function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s(7838);const r=class{constructor(t,s,i,r){n(this,"shipIndex",void 0),n(this,"hasHit",void 0),n(this,"element",void 0),n(this,"row",void 0),n(this,"column",void 0),this.element=e.createCellHtmlElement(i,r),this.row=t,this.column=s}getElement(){return this.element}getHasHit(){return this.hasHit}setHasHit(e){this.hasHit=e}getShipIndex(){return this.shipIndex}setShipIndex(e){this.shipIndex=e}setClassNameToInitialState(){this.element.classList.contains("cell_cellHit")?this.element.classList.remove("cell_cellHit"):this.element.classList.contains("cell_cellMiss")&&this.element.classList.remove("cell_cellMiss"),this.element.classList.contains("cell_notBombed")||this.element.classList.add("cell_notBombed")}static parseCellLocation(e){var t=e.split(",");return{row:parseInt(t[0]),column:parseInt(t[1])}}cellLocation(){return this.row+","+this.column}markCellAsShipHit(){this.setHasHit(!0),this.element.classList.remove("cell_notBombed"),this.element.classList.add("cell_cellHit")}markCellAsShipMiss(){this.setHasHit(!0),this.element.classList.remove("cell_notBombed"),this.element.classList.add("cell_cellMiss")}},o=class{constructor(){var e,t;t=void 0,(e="element")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t;const s=document.getElementsByClassName("svgClockWrapper")[0];this.element=s}showSpiner(){this.element.classList.add("svgClockWrapper_open")}hideSpiner(){this.element.classList.remove("svgClockWrapper_open")}getElement(){return this.element}},a=new class{constructor(){var e,t;t=void 0,(e="explosionSound")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t;const s=new Audio("./sounds/explosion.mp3");this.explosionSound=s}getExplosionSound(){return this.explosionSound}};function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=class{constructor(e,t,s,i){let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0;l(this,"playerBoard",void 0),l(this,"game",void 0),l(this,"ships",void 0),l(this,"cells",void 0),l(this,"playerTurn",!1),l(this,"shipSizes",[5,4,3,3,2]),l(this,"positioningEnabled",void 0),l(this,"isDragging",!1),l(this,"element",void 0),l(this,"timerOfPlayerTurnStart",void 0),l(this,"mode",void 0),l(this,"spiner",void 0),this.mode=r,this.playerBoard=n,this.element=e,this.positioningEnabled=!1,this.spiner=new o,this.game=h,this.fillBoardWithCellsAndShips(t,s,i,a,c),n||(this.onCellClick=this.onCellClick.bind(this),"replay"!==r&&this.element.addEventListener("click",this.onCellClick)),this.makeShipDraggable=this.makeShipDraggable.bind(this),this.makeShipsFlippable=this.makeShipsFlippable.bind(this)}fillBoardWithCellsAndShips(e,t,s,i,n){this.cells=this.createCells(e,t),"replay"===this.mode?(this.ships=this.replayCreateShips(i,s),this.updateCellData()):"restore"===this.mode?(this.ships=this.replayCreateShips(i,s),this.updateCellData(),this.changeCellsToRestoreGame(n),setTimeout((()=>this.setShipsHitsToRestoreGame(i)),100)):this.ships=this.createShips(s),this.ships.forEach((e=>{let t=e.getElement();this.playerBoard?(this.makeShipDraggable(e,this.element),this.makeShipsFlippable(e)):t.classList.add("ship_unvisible"),this.element.appendChild(t)}))}changeCellsToRestoreGame(e){for(let t=0;t<e.length;t++){const s=e[t];for(let i=0;i<s.length;i++){const s=this.cells[t][i].getElement();"exploaded"===e[t][i].state?(s.classList.remove("cell_notBombed"),s.classList.add("cell_cellHit"),this.cells[t][i].setHasHit(!0)):"hitButEmpty"===e[t][i].state&&(s.classList.remove("cell_notBombed"),s.classList.add("cell_cellMiss"),this.cells[t][i].setHasHit(!0))}}}setShipsHitsToRestoreGame(e){this.ships.forEach(((t,s)=>{t.setHits(e[s].hits),this.playerBoard||t.getHits()===t.getSize()&&this.showShip(t)}))}setPlayerTurn(e){this.playerTurn=e}createCells(e,t){let s,i=[];for(let o=0;o<10;o++){i[o]=[];for(var n=0;n<10;n++)s=new r(o,n,e,t),i[o][n]=s,this.element.appendChild(s.getElement()),s.getElement().dataset.cellLocation=s.cellLocation()}return i}createShips(e){let t=[];for(let s=0;s<this.shipSizes.length;s++){let n=new i(this.shipSizes[s],e);t[s]=n,n.updatePosition(s,0,!1)}return t}replayCreateShips(e,t){let s=[];return e.forEach((e=>{let n=new i(e.size,t);s.push(n),n.updatePosition(e.row,e.column,e.isVertical)})),s}makeShipDraggable(t,s){t.getElement().addEventListener("mousedown",(i=>{let n,r,o,a,l;document.getElementById("boards"),e.isMobileMode()?({boardCoord:n,boardHeight:r,boardWidthReal:o,deltaY:a,deltaX:l}=e.getCoordForMakeShipsDraggableMouseDownOrTouchStartHandler(i,t,s,!1)):({boardCoord:n,boardHeight:r,boardWidthReal:o,deltaY:a,deltaX:l}=e.getCoordForMakeShipsDraggableMouseDownOrTouchStartHandler(i,t,s,!0));const c=s=>{s.preventDefault(),this.isDragging=!0,this.positioningEnabled&&(e.isMobileMode()?e.setShipCoordForMakeShipsDraggableMouseMoveOrTouchMoveHandler(s,n,t,l,a,!1):e.setShipCoordForMakeShipsDraggableMouseMoveOrTouchMoveHandler(s,n,t,l,a,!0))},h=s=>{e.isMobileMode()?e.updateShipPositionForMakeShipsDraggableMouseUpOrTouchEndHandler(t,n,o,r,!1):e.updateShipPositionForMakeShipsDraggableMouseUpOrTouchEndHandler(t,n,o,r,!0),setTimeout((()=>this.isDragging=!1),500),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h)};document.addEventListener("mouseup",h),document.addEventListener("mousemove",c,{passive:!1})})),t.getElement().addEventListener("touchstart",(i=>{let n,r,o,a,l;document.getElementById("boards"),e.isMobileMode()?({boardCoord:n,boardHeight:r,boardWidthReal:o,deltaY:a,deltaX:l}=e.getCoordForMakeShipsDraggableMouseDownOrTouchStartHandler(i.touches[0],t,s,!1)):({boardCoord:n,boardHeight:r,boardWidthReal:o,deltaY:a,deltaX:l}=e.getCoordForMakeShipsDraggableMouseDownOrTouchStartHandler(i.touches[0],t,s,!0));const c=s=>{s.preventDefault(),this.isDragging=!0,this.positioningEnabled&&(e.isMobileMode()?e.setShipCoordForMakeShipsDraggableMouseMoveOrTouchMoveHandler(s.touches[0],n,t,l,a,!1):e.setShipCoordForMakeShipsDraggableMouseMoveOrTouchMoveHandler(s.touches[0],n,t,l,a,!0))},h=s=>{e.isMobileMode()?e.updateShipPositionForMakeShipsDraggableMouseUpOrTouchEndHandler(t,n,o,r,!1):e.updateShipPositionForMakeShipsDraggableMouseUpOrTouchEndHandler(t,n,o,r,!0),setTimeout((()=>this.isDragging=!1),500),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",h)};document.addEventListener("touchend",h),document.addEventListener("touchmove",c,{passive:!1})}))}makeShipsFlippable(e){e.getElement().addEventListener("click",(t=>{t.preventDefault(),this.positioningEnabled&&!this.isDragging&&e.flipShip()}))}set dragAndDropEnabled(e){this.positioningEnabled=e}getRandomPosition(){return{row:Math.floor(10*Math.random()),column:Math.floor(10*Math.random()),vertical:1===Math.floor(2*Math.random())}}onCellClick(e){let t=e.target;t.classList.contains("cell")&&this.game.onComputerBoardEvent("click",{row:null,column:null},{target:t})}bombCell(e){let t=e.dataset.cellLocation,s=r.parseCellLocation(t),i=this.cells[s.row][s.column];if(i.getHasHit())return;let n=i.getShipIndex();if(n>=0){i.markCellAsShipHit();let t=this.ships[n];t.setHits(1),this.playerTurn?(t.isSunk()?this.allShipsSunk()?this.game.onComputerBoardEvent("allSunk",s,{ship:t}):this.game.onComputerBoardEvent("shipSunk",s,{ship:t}):this.game.onComputerBoardEvent("hit",s,{ship:t}),this.startExplosion(e).then((t=>new Promise(((t,s)=>{setTimeout((()=>this.startExplosion(e).then((()=>t("done")))),100)}))))):(this.game.getComplexLastHitsCoord()[n]?this.game.getComplexLastHitsCoord()[n].push({row:s.row,column:s.column}):this.game.setComplexLastHitsCoord(n,[{row:s.row,column:s.column}]),this.startExplosion(e).then((t=>new Promise(((t,s)=>{setTimeout((()=>this.startExplosion(e).then((e=>t(!0)))),100)})))).then((e=>{clearInterval(this.timerOfPlayerTurnStart),this.game.rotateCubeTimer().then((e=>{this.game.clearWaitYorTurnMsg(),"replay"!==this.mode&&this.spiner.hideSpiner(),t.isSunk()?(this.game.setComplexLastHitsCoord(n,null),this.allShipsSunk()?this.game.onPlayerBoardEvent("allSunk",s):this.game.onPlayerBoardEvent("shipSunk",s)):this.game.onPlayerBoardEvent("hit",s,t)}))})))}else i.markCellAsShipMiss(),this.playerTurn?(this.game.onComputerBoardEvent("playerMissed",s),this.startExplosion(e)):this.startExplosion(e).then((()=>(clearInterval(this.timerOfPlayerTurnStart),new Promise(((e,t)=>{this.game.rotateCubeTimer().then((()=>{"replay"!==this.mode&&this.spiner.hideSpiner(),this.game.clearWaitYorTurnMsg(),e("done")}))}))))).then((e=>this.game.onPlayerBoardEvent("playerMissed",s)))}allShipsSunk(){return this.ships.every((function(e){return e.isSunk()}))}randomize(){let e=this.ships.length;do{for(let s=0;s<e;s++){var t=this.getRandomPosition();this.ships[s].updatePosition(t.row,t.column,t.vertical)}}while(!this.boardIsValid())}boardIsValid(){let e=[];for(let t=0;t<this.ships.length;t++)e=e.concat(this.ships[t].getCellsCovered());e.sort();let t=e.some((function(e,t,s){return e===s[t+1]})),s=e.some((function(e){let t=r.parseCellLocation(e);return!(t.column>=0&&t.column<=9&&t.row>=0&&t.row<=9)}));return!t&&!s&&(this.updateCellData(),!0)}updateCellData(){for(let e=0;e<100;e++){let t=this.cells[Math.floor(e/10)][e%10];t.setHasHit(!1),t.setShipIndex(-1)}for(let t=0;t<this.ships.length;t++){var e=this.ships[t];e.setHits(0);let s=e.getCellsCovered();for(let e=0;e<s.length;e++){let i=r.parseCellLocation(s[e]);this.cells[i.row][i.column].setShipIndex(t)}}this.cells.forEach((e=>e.forEach((e=>e.setClassNameToInitialState()))))}chooseMove(){let e,t,s,i,n,r,o,a,l;this.spiner.getElement().addEventListener("click",(()=>{this.playerTurn||this.game.onComputerBoardEvent("click")}),{once:!0});let c,h,u=!0;if(this.game.getComplexLastHitsCoord().every((function(e){return null===e}))){do{t=this.getRandomPosition(),e=this.cells[t.row][t.column]}while(e.getHasHit());this.bombCell(e.getElement())}else if(c=this.game.getComplexLastHitsCoord().filter((function(e){return null!=e})),h=c[0],1===h.length){i=h[0].row,n=h[0].column,l=[{row:i,column:n+1},{row:i,column:n-1},{row:i+1,column:n},{row:i-1,column:n}];do{a=Math.floor(4*Math.random()),s=l[a],s.row<0||s.row>9||s.column<0||s.column>9||(e=this.cells[s.row][s.column],u=e.getHasHit())}while(u);this.bombCell(e.getElement())}else if(h.length>1){h[0].column===h[1].column?(h.sort((function(e,t){return e.row-t.row})),i=h[0].row,n=h[0].column,r=h[h.length-1].row,l=[{row:i-1,column:n},{row:r+1,column:n}]):(h.sort((function(e,t){return e.column-t.column})),i=h[0].row,n=h[0].column,o=h[h.length-1].column,l=[{row:i,column:n-1},{row:i,column:o+1}]);do{a=Math.floor(2*Math.random()),s=l[a],s.row<0||s.row>9||s.column<0||s.column>9||(e=this.cells[s.row][s.column],u=e.getHasHit())}while(u);this.bombCell(e.getElement())}}timerComputerThinkingStart(){let t=document.getElementsByClassName("cube")[0];const s=document.getElementsByClassName("cube__face--right")[0];let i=0;this.timerOfPlayerTurnStart=setInterval((()=>{++i,s.innerHTML="computer is thinking!<br>"+i}),1e3),s.innerHTML="computer is thinking!<br>0",e.toggleClassOfHtmlElem(t,"show-top","show-right")}clearCompThinkingTimer(){document.getElementsByClassName("cube__face--right")[0].innerHTML=""}startExplosion(e){let t=e.firstElementChild;return new Promise(((e,s)=>{a.getExplosionSound().load();try{a.getExplosionSound().play().catch((e=>console.log(e)))}catch(e){console.log(e)}t.ontransitionend=function(){t.ontransitionend=null,t.classList.remove("animationExplosion_show"),setTimeout((()=>{t.ontransitionend=function(){t.ontransitionend=null,e("done")}}),100)},t.classList.add("animationExplosion_show")}))}showShip(e){e.getElement().classList.remove("ship_unvisible")}showRestOfTheShips(){this.ships.filter((e=>e.getElement().classList.contains("ship_unvisible"))).forEach((e=>e.getElement().classList.remove("ship_unvisible")))}hideAllShips(){this.ships.forEach((e=>{e.getElement().classList.add("ship_unvisible")}))}replayBombCell(e,t){const s=this.cells[e][t].getElement();this.bombCell(s)}getElement(){return this.element}getShipsPositionsForReplayAndRestore(){const e=[];return this.ships.forEach((t=>{let s=t.getShipPositionForReplay();e.push(s)})),e}getCellsStatesForRestore(){const e=[];return this.cells.forEach((t=>{const s=[];t.forEach((e=>{const t=e.getHasHit(),i=e.getShipIndex()>-1;t&&i?s.push({state:"exploaded",shipIndex:e.getShipIndex()}):t?s.push({state:"hitButEmpty",shipIndex:e.getShipIndex()}):s.push({state:"unTouched",shipIndex:e.getShipIndex()})})),e.push(s)})),e}};function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let u;var m,d;!function(e){e[e.animation=0]="animation",e[e.begin=1]="begin",e[e.computerTurn=2]="computerTurn",e[e.playerTurn=3]="playerTurn",e[e.finished=4]="finished"}(u||(u={})),function(e){e.gameStart="Drag your ships to the desired location on your board (on the right). To flip a ship click on it. Then click a square on the left board to start the game!",e.invalidPositions="All ships must be in valid positions before the game can begin.",e.wait="Wait your turn!",e.gameOn="Game on!",e.enemyShipHit="Enemy ship was hit",e.yourShipHit="Your ship was hit",e.shipSunk="You sunk a ship!",e.lostShip="You lost a ship :-(",e.lostGame="You lost this time. Click anywhere on the left board to play again.",e.allSunk="Congratulations!  You won!  Click anywhere on the left board to play again."}(m||(m={})),function(e){e[e["for the first time"]=0]="for the first time",e[e["for the second time"]=1]="for the second time",e[e["for the third time"]=2]="for the third time",e[e["for the forth time"]=3]="for the forth time",e[e["for the fifth time"]=4]="for the fifth time"}(d||(d={}));const p=new class{constructor(){h(this,"enumGameState",void 0),h(this,"enumMessages",void 0),h(this,"shipHitMessages",void 0),this.enumGameState=u,this.enumMessages=m,this.shipHitMessages=d}getGameStateEnum(){return this.enumGameState}getMesssagesEnum(){return this.enumMessages}getShipHitsMessages(){return this.shipHitMessages}};function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s(8995);const v=class{constructor(){var e,t;t=void 0,(e="element")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t;const s=document.getElementsByClassName("notificationWrapper")[0];this.element=s}showNotification(e){this.element.classList.add("notificationWrapper_open"),this.element.firstElementChild.classList.add("notification_open"),this.element.firstElementChild.innerHTML=e,setTimeout((()=>{this.element.firstElementChild.classList.remove("notification_open"),this.element.firstElementChild.ontransitionend=()=>{this.element.classList.remove("notificationWrapper_open"),this.element.firstElementChild.ontransitionend=null}}),4e3)}};function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s(9897);const E=class{constructor(e,t,s,i){S(this,"typeOfForm",void 0),S(this,"frameElement",void 0),S(this,"formElement",void 0),S(this,"isNameValidated",!1),S(this,"isEmailValidated",!1),S(this,"isPasswordValidated",!1),S(this,"openFlag",!1),S(this,"game",void 0),S(this,"spiner",void 0),this.spiner=new o,this.game=i,this.typeOfForm=s,this.frameElement=document.getElementsByClassName(e)[0],this.formElement=document.getElementsByClassName(t)[0],document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.hide()})),this.frameElement.addEventListener("click",(e=>{this.frameElement==e.target&&this.hide()})),this.formElement.firstElementChild.addEventListener("click",(()=>{this.hide()})),this.addValidatesForInputs(),this.addEventsToSubbmitButton(s)}addEventsToSubbmitButton(t){const s=this.formElement.elements.namedItem("button"),i=this.formElement.elements.namedItem("restorePassword");s.addEventListener("mousedown",(e=>s.classList.add("registrationMenu__button_pressed"))),s.addEventListener("mouseup",(e=>s.classList.remove("registrationMenu__button_pressed"))),s.addEventListener("click",(s=>{s.preventDefault(),[...this.formElement.getElementsByTagName("input")].forEach((e=>{""===e.value&&this.validate("",e.name)}));const n=this.getDataForRegistration();if(console.log(n),"login"===t&&this.isNameValidated&&this.isEmailValidated&&i.checked){this.spiner.showSpiner();const t="".concat(window.location.protocol,"//").concat(window.location.host);n.web=t;const s=fetch("/restorePassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});e.promiseWrapperForTimeOut(s,6e4).then((e=>e.json())).then((e=>{switch(console.log(e),this.spiner.hideSpiner(),e.type){case"ok":this.showMessage("instructions to restore your password have been sent to your email").then((e=>{this.hide()}));break;case"no such user":this.showMessage("no such user");break;case"error":this.showMessage("Something went wrong, try again later")}})).catch((e=>{console.log(e),this.showMessage("Something went wrong, try again later")}))}else if(this.isNameValidated&&this.isEmailValidated&&this.isPasswordValidated){const s="register"===t?"/register":"/login",i="register"===t?"PUT":"POST";this.spiner.showSpiner();const r=fetch(s,{method:i,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});e.promiseWrapperForTimeOut(r,6e4).then((e=>e.json())).then((e=>{switch(e.type){case"ok":this.spiner.hideSpiner();const s="register"===t?"Succsesful registration!":"You are logged in";this.showMessage(s).then((s=>{if("login"===t){const t=JSON.stringify({userId:e.userId,name:n.name});this.showLoginName(n.name),localStorage.setItem("warShipUser",t),this.game.setUserId(e.userId),this.game.setUsername(n.name)}this.hide()}));break;case"ErrorDataBaseOperation":this.spiner.hideSpiner(),this.showMessage("Something went wrong try again later!");break;case"duplicateEmail":this.spiner.hideSpiner(),this.showMessage("The user with such email registered already");break;case"wrongLogin":this.spiner.hideSpiner(),this.showMessage("Your password, email or login is wrong");break;case"ErrorValidation":this.spiner.hideSpiner();const i=e,r=this.formElement.elements.namedItem("name"),o=i.name;""!==o&&(this.addErrorMessageToInput(r,!0,o),this.isNameValidated=!1);const a=this.formElement.elements.namedItem("email"),l="".concat(n.email,"--").concat(i.email);""!==l&&(this.addErrorMessageToInput(a,!0,l),this.isEmailValidated=!1);const c=this.formElement.getElementsByClassName("registrationMenu__passwordError")[0],h=i.password;""!==h&&(this.addErrorMessageToInput(c,!1,h),this.isPasswordValidated=!1),this.showMessage("Error of form validation!")}})).catch((e=>{console.log(e),this.spiner.hideSpiner(),this.showMessage("Something went wrong try again later!")}))}else this.spiner.hideSpiner(),this.showMessage("Error of form validation!")}))}show(){this.openFlag||(this.openFlag=!0,this.frameElement.classList.add("regMenuFrame_show"),this.formElement.classList.add("registrationMenu_show"))}hide(){this.openFlag&&(this.openFlag=!1,this.formElement.classList.remove("registrationMenu_show"),this.clearInputs(),this.isNameValidated=!1,this.isEmailValidated=!1,this.isPasswordValidated=!1,this.formElement.ontransitionend=()=>{this.frameElement.classList.remove("regMenuFrame_show"),this.formElement.ontransitionend=null})}showMessage(e){return new Promise(((t,s)=>{const i=this.formElement.lastElementChild;i.innerHTML=e,i.classList.add("registrationMenu__validationError_show"),setTimeout((()=>{i.classList.remove("registrationMenu__validationError_show"),t("done")}),3e3)}))}showLoginName(e){document.getElementsByClassName("loginName")[0].innerHTML="Logged in as ".concat(e)}addValidatesForInputs(){const e=this.formElement.elements.namedItem("name");e.addEventListener("blur",(t=>{this.validate(e.value,"name")})),e.addEventListener("input",(t=>{e.classList.remove("input_red")}));const t=this.formElement.elements.namedItem("email");t.addEventListener("blur",(e=>{this.validate(t.value,"email")})),t.addEventListener("input",(e=>{t.classList.remove("input_red")}));const s=this.formElement.elements.namedItem("password");s.addEventListener("blur",(e=>{this.validate(s.value,"password")})),s.addEventListener("input",(e=>{s.classList.remove("input_red")})),s.addEventListener("focus",(e=>{s.value="",s.type="password"}))}clearInputs(){[...this.formElement.getElementsByTagName("input")].forEach((e=>e.value="")),this.formElement.getElementsByClassName("registrationMenu__passwordError")[0].innerHTML=""}validate(e,t){switch(t){case"name":this.validateName(e);break;case"email":this.validateEmail(e);break;case"password":this.validatePassword(e)}}validateName(e){if(0===e.trim().length){const e=this.formElement.elements.namedItem("name"),t="NAME MUST NOT BE EMPTY";this.addErrorMessageToInput(e,!0,t),this.isNameValidated=!1}else this.isNameValidated=!0}validateEmail(e){if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))this.isEmailValidated=!0;else{const t=this.formElement.elements.namedItem("email"),s="".concat(e," this email is incorrect");this.addErrorMessageToInput(t,!0,s),this.isEmailValidated=!1}}validatePassword(e){const t=[];/\d+/.test(e)||t.push("Your password must contain numbers!"),/[a-z]/.test(e)||(e=>/[а-я]/.test(e))(e)||t.push("Your password must contain lower case letters!"),(e=>/[A-Z]/.test(e))(e)||(e=>/[А-Я]/.test(e))(e)||t.push("Your password must contain upper case letters!"),(e=>/\W/.test(e))(e)||t.push("Your password must contain special characters (&,%,@,! or other)!"),(e=>/\s/.test(e))(e)&&t.push("Your password must not contain spaces!"),(e=>e.length>=7)(e)||t.push("length must be more then 7 characters!");const s=this.formElement.getElementsByClassName("registrationMenu__passwordError")[0];if(0!==t.length){const e="login"===this.typeOfForm?"Wrong password":t.join(" ");this.addErrorMessageToInput(s,!1,e),this.isPasswordValidated=!1}else s.innerText="",this.isPasswordValidated=!0}addErrorMessageToInput(e,t,s){t?e.value=s:e.innerText=s,e.classList.add("input_red")}getDataForRegistration(){const e={name:"",email:"",password:""};return[...this.formElement.getElementsByTagName("input")].forEach(((t,s)=>s<3?e[t.name]=t.value:null)),e}},w=class extends E{},b=class extends E{};function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const T=class{constructor(t,s){M(this,"gameState",p.getGameStateEnum()),M(this,"msgs",p.getMesssagesEnum()),M(this,"state",this.gameState.animation),M(this,"playerBoard",void 0),M(this,"computerBoard",void 0),M(this,"timer",void 0),M(this,"regForm",void 0),M(this,"loginForm",void 0),M(this,"menu",void 0),M(this,"notification",void 0),M(this,"userName",null),M(this,"userId",null),M(this,"mode",null),M(this,"replayMoveArray",[]),M(this,"replayCounterMoves",0),M(this,"sliderState",1),M(this,"complexLastHitsCoord",[]),M(this,"currentMessage",void 0),M(this,"onComputerBoardEvent",((e,t,s)=>{switch(e){case"click":switch(this.state){case this.gameState.begin:this.startGame(s.target);break;case this.gameState.computerTurn:this.updateStatus(this.msgs.wait);break;case this.gameState.playerTurn:this.computerBoard.bombCell(s.target);break;case this.gameState.finished:this.computerBoard.randomize(),this.computerBoard.hideAllShips(),this.playerBoard.randomize(),this.playerBoard.dragAndDropEnabled=!0,this.updateStatus(this.msgs.gameStart),this.state=this.gameState.begin}break;case"playerMissed":this.computersTurn(),"replay"!==this.mode&&(this.replayMoveArray.push(t),this.saveGameSnapShot());break;case"hit":this.updateStatus(this.msgs.enemyShipHit,s.ship),this.computersTurn(),"replay"!==this.mode&&(this.replayMoveArray.push(t),this.saveGameSnapShot());break;case"shipSunk":this.computerBoard.showShip(s.ship),this.updateStatus(this.msgs.shipSunk),this.computersTurn(),"replay"!==this.mode&&(this.replayMoveArray.push(t),this.saveGameSnapShot());break;case"allSunk":"replay"!==this.mode&&this.userId&&(this.replayMoveArray.push(t),this.saveGameInfoForReplay(this.userId,"victory"),this.clearGameSnapShot()),this.computerBoard.showShip(s.ship),this.playerBoard.showRestOfTheShips(),this.state=this.gameState.finished,this.timer.stopTimer(),this.computerBoard.setPlayerTurn(!1),this.updateStatus(this.msgs.allSunk),this.notification.showNotification("Congratulations! Victory!")}})),M(this,"onPlayerBoardEvent",((e,t,s)=>{switch(e){case"playerMissed":this.computerBoard.setPlayerTurn(!0),this.state=this.gameState.playerTurn,"replay"===this.mode?this.bombBoardInReplayMode("computer"):(this.replayMoveArray.push(t),this.saveGameSnapShot());break;case"hit":this.updateStatus(this.msgs.yourShipHit,s),this.computerBoard.setPlayerTurn(!0),this.state=this.gameState.playerTurn,"replay"===this.mode?this.bombBoardInReplayMode("computer"):(this.replayMoveArray.push(t),this.saveGameSnapShot());break;case"shipSunk":this.updateStatus(this.msgs.lostShip),this.computerBoard.setPlayerTurn(!0),this.state=this.gameState.playerTurn,"replay"===this.mode?this.bombBoardInReplayMode("computer"):(this.replayMoveArray.push(t),this.saveGameSnapShot());break;case"allSunk":"replay"!==this.mode&&(this.clearGameSnapShot(),this.userId&&(this.replayMoveArray.push(t),this.saveGameInfoForReplay(this.userId,"defeat"))),this.updateStatus(this.msgs.lostGame),this.notification.showNotification("You lost this game."),this.computerBoard.setPlayerTurn(!1),this.computerBoard.showRestOfTheShips(),this.state=this.gameState.finished,this.timer.stopTimer()}}));let i=null,n=null,r=null,a=null,l=null;this.autoLogIn(),"replay"===t?(this.mode="replay",this.clearSessionStorage(),this.replayMoveArray=s.moves,i=s.positionOfShips,n=i.computerBoard,r=i.playerBoard):"restore"===t?(this.mode="restore",n=s.computerBoardShips,r=s.playerBoardShips,a=s.computerBoardCells,l=s.playerBoardCells,this.complexLastHitsCoord=s.computerHits,this.replayMoveArray=s.arrayOfMoves):t=null;let h=document.getElementById("playerBoard"),u=document.getElementById("computerBoard");this.regForm=new w("regMenuFrame","registrationMenu","register",this),this.loginForm=new b("regMenuFrame","registrationMenu_login","login",this),this.computerBoard=new c(u,["cell","cell_notBombed"],["animationExplosion"],["ship"],!1,t,n,a,this),this.playerBoard=new c(h,["cell","cell_notBombed"],["animationExplosion"],["ship"],!0,t,r,l,this),this.menu=new class{constructor(t,s,i){y(this,"menuElement",void 0),y(this,"buttonElement",void 0),y(this,"game",void 0),y(this,"statistics",void 0),y(this,"notification",void 0),y(this,"spiner",void 0),y(this,"deleteRegistrationsMenu",void 0),y(this,"statisticsInfo",null),this.menuElement=document.getElementsByClassName(t)[0],this.buttonElement=document.getElementsByClassName(s)[0],this.game=i,this.statistics=new class{constructor(e,t){f(this,"element",void 0),f(this,"openFlag",!1),f(this,"game",void 0),f(this,"menu",void 0),f(this,"spiner",void 0),this.game=e,this.menu=t,this.spiner=new o;const s=document.getElementsByClassName("statistics")[0];this.element=s;const i=document.getElementsByClassName("statistics__button")[0],n=document.getElementsByClassName("statistics__bookmarkTable")[0],r=document.getElementsByClassName("statistics__bookmarkChart")[0],a=document.getElementsByClassName("statistics__bookmarkDeleteStatistics")[0],l=document.getElementsByClassName("table")[0],c=document.getElementsByClassName("chart")[0],h=document.getElementsByClassName("deleteStatMenu")[0],u=document.getElementsByClassName("deleteStatMenu__button_yes")[0],m=document.getElementsByClassName("deleteStatMenu__button_no")[0];n.addEventListener("click",(()=>{l.classList.add("table_active"),n.classList.add("statistics__bookmarkTable_active"),h.classList.remove("deleteStatMenu_active"),c.classList.remove("chart_active"),r.classList.remove("statistics__bookmarkChart_active"),a.classList.remove("statistics__bookmarkDeleteStatistics_active")}));const d=()=>{c.classList.add("chart_active"),r.classList.add("statistics__bookmarkChart_active"),l.classList.remove("table_active"),h.classList.remove("deleteStatMenu_active"),n.classList.remove("statistics__bookmarkTable_active"),a.classList.remove("statistics__bookmarkDeleteStatistics_active")};r.addEventListener("click",d),a.addEventListener("click",(()=>{h.classList.add("deleteStatMenu_active"),a.classList.add("statistics__bookmarkDeleteStatistics_active"),l.classList.remove("table_active"),c.classList.remove("chart_active"),n.classList.remove("statistics__bookmarkTable_active"),r.classList.remove("statistics__bookmarkChart_active")})),i.addEventListener("click",(e=>{e.preventDefault(),this.closeStatisticsMenu(),d()})),i.addEventListener("mousedown",(()=>{i.classList.add("statistics__button_pressed")})),i.addEventListener("mouseup",(()=>{i.classList.remove("statistics__button_pressed")})),m.addEventListener("click",(e=>{e.preventDefault(),this.closeStatisticsMenu(),d()})),u.addEventListener("click",(e=>{e.preventDefault(),this.deleteStatisticsOfTheUser(d)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.closeStatisticsMenu(),d())}))}showStatisticsMenu(e,t){if(this.openFlag=!0,"new"===t){const t=e.victories,s=e.defeats;this.createChart(s,t),this.createTable(e.gamesToReplayArray)}this.element.classList.add("statistics_open")}closeStatisticsMenu(){this.openFlag&&(this.openFlag=!1,this.element.classList.remove("statistics_open"))}createChart(e,t){const s=document.getElementsByClassName("chart__diagramSecondElem")[0],i=document.getElementsByClassName("chart__diagramThirdElem")[0],n=document.getElementsByClassName("chart__diagramFirstElem")[0],r=document.getElementsByClassName("chart__diagramSecondElem")[0],o=document.getElementsByClassName("chart__victories")[0],a=document.getElementsByClassName("chart__defeats")[0],l=t/(t+e),c=360*l,h=360-c;o.innerHTML="<div>victories ".concat(t," (").concat(Math.round(100*l),"%)</div>"),a.innerHTML="<div>defeats ".concat(e," (").concat(100-Math.round(100*l),"%)</div>"),t<=e?s.style.transform="rotate(".concat(c,"deg)"):(i.classList.add("chart__diagramThirdElem_anotherColor"),n.classList.add("chart__diagramFirstElem_anotherColor"),r.classList.add("chart__diagramSecondElem_anotherColor"),s.style.transform="rotate(".concat(h,"deg)"))}createTable(e){const t=new DocumentFragment,s=document.getElementsByClassName("table")[0],i=document.getElementById("templateRow");let n=i.content.cloneNode(!0);const r=document.getElementById("btnReplayGame");s.innerHTML="",t.appendChild(n),e.forEach((e=>{n=i.content.cloneNode(!0);const s=n.firstElementChild.children,o=r.content.cloneNode(!0);o.firstElementChild.addEventListener("click",(()=>{this.game.replay(e)})),s[0].innerText=e.date,s[1].innerText=e.duaration,s[2].innerText=e.result,s[3].innerText=String(e.moves.length),s[4].innerText="",s[4].appendChild(o),t.appendChild(n)})),s.appendChild(t)}deleteStatisticsOfTheUser(t){const s=this.game.getUserId(),i=fetch("/deleteStatistics",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s})});this.spiner.showSpiner(),e.promiseWrapperForTimeOut(i,6e4).then((e=>e.json())).then((e=>{switch(this.spiner.hideSpiner(),e.type){case"ok":console.log("ok"),this.menu.setStatistics(null),this.showMessage("the Users's statistics deleted!").then((e=>{this.closeStatisticsMenu(),t()}));break;case"no such user":console.log("no such user"),this.showMessage("No such user!").then((e=>{this.closeStatisticsMenu(),t()}));break;case"error":console.log("something went wrong try again later"),this.showMessage("something went wrong try again later!").then((e=>{this.closeStatisticsMenu(),t()}))}})).catch((e=>{console.log(e),this.showMessage("something went wrong try again later!").then((e=>{this.closeStatisticsMenu(),t()}))}))}showMessage(e){return new Promise(((t,s)=>{const i=document.getElementsByClassName("deleteStatMenu__message")[0];i.innerHTML=e,i.classList.add("deleteStatMenu__message_show"),setTimeout((()=>{i.classList.remove("deleteStatMenu__message_show"),t("done")}),3e3)}))}}(i,this),this.notification=new v,this.spiner=new o,this.deleteRegistrationsMenu=new class{constructor(){var e,t;t=void 0,(e="element")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.element=document.getElementsByClassName("deleteRegistrationMenu")[0]}open(){this.element.parentElement.classList.add("deleteRegistrationMenuWrapper_open")}close(){this.element.parentElement.classList.remove("deleteRegistrationMenuWrapper_open")}async deleteOrNotDelete(){return new Promise(((e,t)=>{const s=document.getElementsByClassName("deleteRegistrationMenu__btn_yes")[0];console.log(s),s.addEventListener("click",(()=>e("yes")));const i=document.getElementsByClassName("deleteRegistrationMenu__btn_no")[0];console.log(i),i.addEventListener("click",(()=>e("no")))}))}},this.setMenu()}setMenu(){[...this.menuElement.children].forEach((e=>{e.addEventListener("mousedown",(t=>{t.preventDefault(),e.classList.add("menu__item_clicked")})),e.addEventListener("mouseup",(t=>{t.preventDefault(),e.classList.remove("menu__item_clicked")})),this.makeAction(e)})),this.buttonElement.addEventListener("click",(e=>{this.menuElement.classList.contains("menu_show")?this.closeMenu():this.showMenu()}))}showMenu(){const e=this.buttonElement.firstElementChild;this.menuElement.classList.add("menu_show"),e.innerText="close"}closeMenu(){const e=this.buttonElement.firstElementChild;this.menuElement.classList.remove("menu_show"),e.innerText="settings"}async getStatistics(t){if(this.statisticsInfo)return{statistics:this.statisticsInfo,status:"old"};let s;const i=fetch("/getGamesInfo?userId=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});return await e.promiseWrapperForTimeOut(i,6e4).then((e=>e.json())).then((e=>{"error"===e.type?s="error":"no statistics"===e.type?s="no statistics":"no such user"===e.type?s="no such user":(s=e.statInfo,this.statisticsInfo=s)})).catch((e=>{s="error"})),{statistics:s,status:"new"}}async showStatistics(){try{if(this.closeMenu(),!this.game.isLoggedIn())return void this.notification.showNotification("You are not logged in");const e=this.game.getUserId();this.spiner.showSpiner();const t=await this.getStatistics(e);this.spiner.hideSpiner(),"error"===t.statistics?this.notification.showNotification("Something went wrong try again later"):"no statistics"===t.statistics||"no such user"===t.statistics?this.notification.showNotification("no statistics available"):(this.statisticsInfo=t.statistics,this.statistics.showStatisticsMenu(t.statistics,t.status))}catch(e){this.notification.showNotification("Something went wrong try again later")}}async deleteRegistration(){try{if(this.closeMenu(),!this.game.isLoggedIn())return void this.notification.showNotification("You are not logged in");if(this.deleteRegistrationsMenu.open(),"no"===await this.deleteRegistrationsMenu.deleteOrNotDelete())return void this.deleteRegistrationsMenu.close();this.spiner.showSpiner();const e=await this.fetchToDelRegistration(),t=await e.json();switch(this.spiner.hideSpiner(),t.type){case"ok":this.game.logOut(),await this.showMessage("The user is deleted!"),this.deleteRegistrationsMenu.close();break;case"no such user":await this.showMessage("no such user!"),this.deleteRegistrationsMenu.close();break;case"error":await this.showMessage("something went wrong try again later"),this.deleteRegistrationsMenu.close()}}catch(e){this.spiner.hideSpiner(),await this.showMessage("something went wrong try again later"),this.deleteRegistrationsMenu.close()}}async fetchToDelRegistration(){const t=this.game.getUserId(),s=fetch("/deleteUser",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})});return e.promiseWrapperForTimeOut(s,6e4)}showMessage(e){return new Promise(((t,s)=>{const i=document.getElementsByClassName("deleteRegistrationMenu__message")[0];i.innerHTML=e,i.classList.add("deleteRegistrationMenu__message_show"),setTimeout((()=>{i.classList.remove("deleteRegistrationMenu__message_show"),t("done")}),3e3)}))}makeAction(e){e.addEventListener("click",(()=>{if(e.classList.contains("menu__item_register")){if(this.closeMenu(),this.game.isLoggedIn())return void this.notification.showNotification("You are logged in. <br>To register you need to log out.");this.game.showRegForm()}else if(e.classList.contains("menu__item_login")){if(this.closeMenu(),this.game.isLoggedIn())return void this.notification.showNotification("You are logged in. <br>To log in you need to log out.");this.game.showLoginForm()}else e.classList.contains("menu__item_logout")?(this.closeMenu(),this.game.logOut()):e.classList.contains("menu__item_statistics")?this.showStatistics():e.classList.contains("menu__item_restart")?this.game.endGame():e.classList.contains("menu__item_delRegistration")&&this.deleteRegistration()}))}setStatistics(e){this.statisticsInfo=e}}("menu","button",this),this.notification=new v,this.fitBoardsWidth(),this.onWindowResize();let m=document.getElementById("svgLetter");e.animateSvgLetters(m).then((e=>{"replay"!==this.mode&&"restore"!==this.mode&&(this.computerBoard.randomize(),this.playerBoard.randomize()),"restore"!==this.mode&&(this.updateStatus(this.msgs.gameStart),this.playerBoard.dragAndDropEnabled=!0,this.rotateCubeFirstMove(),this.state=this.gameState.begin),"replay"===this.mode&&(this.computerBoard.getElement().addEventListener("click",(()=>this.endGame())),this.replayMoves()),"restore"==this.mode&&(this.state=s.stateOfGame,this.state===p.getGameStateEnum().computerTurn?(this.rotateCubeFirstMove(),this.computersTurn()):(this.computerBoard.setPlayerTurn(!0),this.rotateCubeFirstMove()))}));let d=s&&"time"in s?s.time:null;this.timer=new class{constructor(){g(this,"timerElement",void 0),g(this,"currentTime",0),g(this,"worker",void 0),this.timerElement=document.getElementsByClassName("timer")[0],this.worker=new Worker("./worker.js"),this.worker.addEventListener("message",(e=>{"move"===e.data.action||"stop"===e.data.action?(this.timerElement.innerText=this.convertTimeToString(e.data.time),this.currentTime=e.data.time):this.timerElement.innerText="00:00:00"}))}startTimer(e){this.worker.postMessage({action:"start",time:e})}stopTimer(){this.worker.postMessage({action:"stop"})}setTime(e,t){}convertTimeToString(e){let t=Math.trunc(e/3600);t=t<10?"0".concat(t):t;let s=Math.trunc(e%3600/60);s=s<10?"0".concat(s):s;let i=e%60;return i=i<10?"0".concat(i):i,"".concat(t," : ").concat(s," : ").concat(i)}},this.timer.startTimer(d)}computersTurn(){this.computerBoard.setPlayerTurn(!1),this.state=this.gameState.computerTurn,this.playerBoard.timerComputerThinkingStart(),"replay"!==this.mode&&this.playerBoard.spiner.showSpiner(),setTimeout((()=>{"replay"===this.mode?this.bombBoardInReplayMode("player"):this.playerBoard.chooseMove()}),5e3)}startGame(e){this.playerBoard.boardIsValid()?(this.state=this.gameState.playerTurn,this.playerBoard.dragAndDropEnabled=!1,this.computerBoard.setPlayerTurn(!0),this.updateStatus(this.msgs.gameOn),this.computerBoard.bombCell(e)):this.updateStatus(this.msgs.invalidPositions)}updateStatus(e,t){this.currentMessage=e;let s="";t&&(s=1===t.getHits()?"<br>".concat(p.getShipHitsMessages()[0]):2===t.getHits()?"<br>".concat(p.getShipHitsMessages()[1]):3===t.getHits()?"<br>".concat(p.getShipHitsMessages()[2]):4===t.getHits()?"<br>".concat(p.getShipHitsMessages()[3]):"<br>".concat(p.getShipHitsMessages()[4])),e="".concat(e).concat(s);const i=document.getElementsByClassName("status")[0],n=document.getElementsByClassName("emptyFrame")[0],r=n.offsetHeight;1===this.sliderState&&(n.innerHTML=e,i.style.marginTop="-".concat(r,"px"),i.ontransitionend=()=>{this.sliderState=2,i.ontransitionend=null}),2===this.sliderState&&(i.style.marginTop="-2".concat(r,"px"),i.ontransitionend=function(){i.style.transitionDuration="1ms",n.innerText="",i.style.marginTop="0px",i.ontransitionend=function(){i.style.transitionDuration="0.5s",n.innerHTML=e,i.style.marginTop="-".concat(r,"px"),i.ontransitionend=null}})}onWindowResize(){const e=function(e,t){let s,i,n=!1;return function t(){if(n)return s=arguments,void(i=this);e.apply(this,arguments),n=!0,setTimeout((function(){n=!1,s&&(t.apply(i,s),s=i=null)}),500)}}(this.fitBoardsWidth);window.onresize=t=>{e()}}fitBoardsWidth(){let e=document.getElementsByClassName("board")[0],t=document.getElementsByClassName("board")[1];e.style.width="",t.style.width="";let s=e.getBoundingClientRect().x;if(s<0){let i=-s-window.pageXOffset+"px";e.style.width="calc(47% - ".concat(i,")"),t.style.width="calc(47% - ".concat(i,")")}}rotateCubeFirstMove(){let t=document.getElementsByClassName("cube")[0];e.toggleClassOfHtmlElem(t,"show-bottom","show-top")}rotateCubeTimer(){return new Promise(((t,s)=>{let i=document.getElementsByClassName("cube")[0];e.toggleClassOfHtmlElem(i,"show-top","show-right"),i.ontransitionend=()=>{i.ontransitionend=null,t("done")}}))}clearWaitYorTurnMsg(){p.getMesssagesEnum().wait===this.currentMessage&&this.updateStatus("")}showRegForm(){this.regForm.show()}showLoginForm(){this.loginForm.show()}logOut(){null!==this.userId&&(this.userId=null,this.userName=null,document.getElementsByClassName("loginName")[0].innerHTML="You are not logged in",localStorage.removeItem("warShipUser"))}autoLogIn(){const e=localStorage.getItem("warShipUser");if(e){const t=JSON.parse(e);this.userId=t.userId,this.userName=t.name,document.getElementsByClassName("loginName")[0].innerHTML="Logged in as ".concat(this.userName)}}endGame(){this.clearSessionStorage(),location.reload()}clearSessionStorage(){sessionStorage.removeItem("replay"),sessionStorage.removeItem("replayInfo")}replay(e){sessionStorage.setItem("replay","replay");const t=JSON.stringify(e);sessionStorage.setItem("replayInfo",t),location.reload()}replayMoves(){this.state=this.gameState.playerTurn,this.playerBoard.dragAndDropEnabled=!1,this.computerBoard.setPlayerTurn(!0),this.updateStatus(this.msgs.gameOn);let e=this.replayCounterMoves,t=this.replayMoveArray[e].row,s=this.replayMoveArray[e].column;setTimeout((()=>this.computerBoard.replayBombCell(t,s)),1500),this.replayCounterMoves++}bombBoardInReplayMode(e){let t=this.replayCounterMoves;if(t<this.replayMoveArray.length){let s=this.replayMoveArray[t].row,i=this.replayMoveArray[t].column;"computer"===e?this.computerBoard.replayBombCell(s,i):this.playerBoard.replayBombCell(s,i),this.replayCounterMoves++}}saveGameInfoForReplay(t,s){const i=this.computerBoard.getShipsPositionsForReplayAndRestore(),n=this.playerBoard.getShipsPositionsForReplayAndRestore(),r=this.replayMoveArray,o=e.getCurrentDate(),a={userId:this.userId,gameToReplay:{date:o,result:s,duaration:this.timer.timerElement.innerText,positionOfShips:{computerBoard:i,playerBoard:n},moves:r}};fetch("/saveStat",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{this.menu.setStatistics(null)}))}isLoggedIn(){return null!==this.userId}getUserId(){return this.userId}setUserId(e){this.userId=e}setUsername(e){this.userName=e}getComplexLastHitsCoord(){return this.complexLastHitsCoord}setComplexLastHitsCoord(e,t){this.complexLastHitsCoord[e]=t}getGameSnapShot(){return{computerBoardCells:this.computerBoard.getCellsStatesForRestore(),playerBoardCells:this.playerBoard.getCellsStatesForRestore(),computerBoardShips:this.computerBoard.getShipsPositionsForReplayAndRestore(),playerBoardShips:this.playerBoard.getShipsPositionsForReplayAndRestore(),stateOfGame:this.state,computerHits:this.complexLastHitsCoord,arrayOfMoves:this.replayMoveArray,time:this.timer.currentTime}}saveGameSnapShot(){const e=this.getGameSnapShot(),t=JSON.stringify(e);localStorage.setItem("restoreGameInfo",t),localStorage.setItem("restore","yes")}clearGameSnapShot(){localStorage.setItem("restoreGameInfo",""),localStorage.setItem("restore","no")}};if("replay"===sessionStorage.getItem("replay")){const e=sessionStorage.getItem("replayInfo"),t=JSON.parse(e);new T("replay",t)}else"yes"===localStorage.getItem("restore")?new class{constructor(){var e,t;t=void 0,(e="element")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.element=document.getElementsByClassName("restoreGameMenuWrapper")[0],this.open(),this.element.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("restoreGameMenu__btn_no"))this.hide(),(new T).clearGameSnapShot();else if(t.classList.contains("restoreGameMenu__btn_yes")){this.hide();const e=localStorage.getItem("restoreGameInfo"),t=JSON.parse(e);new T("restore",t)}}))}open(){this.element.classList.add("restoreGameMenuWrapper_open")}hide(){this.element.classList.remove("restoreGameMenuWrapper_open")}}:new T})()})();
//# sourceMappingURL=main.js.map